# Router-Based VPN with IPSec using Cisco Virtual Tunnel Interface (VTI)

This project demonstrates the step-by-step configuration of an IPSec VPN tunnel using Cisco's Virtual Tunnel Interface (VTI) to allow for secure communication and dynamic routing between two remote sites.

![Topology Diagram](image)

## 1. Initial IP Connectivity
The first step is to ensure there is stable IP connectivity between the two routers. 
* **R1 Interface IP:** 10.0.0.2 
* **R3 Interface IP:** 10.0.0.6

![Connectivity Verification](image)

---

## 2. Phase 1: Internet Key Exchange (IKE) 
Once we have connectivity, we configure Phase 1 of the connection. The ISAKMP policy must be configured on both routers to match.

![ISAKMP Policy Configuration R1](image)
![ISAKMP Policy Configuration R3](image)

> **Note:** All features must match for the Phase 1 tunnel to form, with the exception of the lifetime value, which will be negotiated to the lowest value in case of a mismatch. 

### Pre-Shared Key (PSK) Authentication
Since the chosen authentication method is a pre-shared key, it must be configured on both routers.

![PSK Configuration R1](image)
![PSK Configuration R3](image)

With this complete, Phase 1 of the process is established.

---

## 3. Phase 2: Transform Set and IPsec Profile
A transform-set is configured for the second phase of the tunnel. This configuration must match on both routers. The mode used is **Tunnel mode**.

![Transform Set Configuration R1](image)
![Transform Set Configuration R3](image)

Once the transform set is defined, an IPsec profile is created to bridge the transform set to the VTI tunnel.

![IPsec Profile Creation R1](image)
![IPsec Profile Creation R3](image)

Phase 2 of the ISAKMP process is now complete.

---

## 4. VTI Tunnel Configuration
The final configuration step is to create the VTI tunnel interface and apply the IPsec profile to it.

![Tunnel Interface Configuration R1](image)
![Tunnel Interface Configuration R3](image)

---

## 5. Verification and Routing
After configuration, we can observe that there is an active IPSec session.

![IPsec Session Status R1](image)
![IPsec Session Status R3](image)

### Dynamic Routing (OSPF)
With the tunnel active, routes can be exchanged between the routers using OSPF. Both routers form an adjacency as if they were directly connected and exchange their loopback interfaces.

![OSPF Routing Table R1](image)
![OSPF Routing Table R3](image)

As observed in the routing table, the next hop is not the physical interface, but the **Tunnel interface**.

### Final Connectivity Test
The loopback interfaces can now successfully ping each other across the encrypted tunnel.

![Ping Success Across VPN](image)
